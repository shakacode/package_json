#!/usr/bin/env bash
# Lint Ruby files with RuboCop
set -euo pipefail

files="$*"

if [ -z "$files" ]; then
  echo "âœ… No Ruby files to lint"
  exit 0
fi

echo "ğŸ” RuboCop on staged Ruby files:"
printf "  %s\n" $files

if ! bundle exec rubocop --force-exclusion --display-cop-names -- $files; then
  echo ""
  echo "âŒ RuboCop check failed!"
  echo "ğŸ’¡ Auto-fix: bundle exec rubocop -a --force-exclusion -- $files"
  echo "ğŸš« Skip hook: git commit --no-verify"
  exit 1
fi

echo "âœ… RuboCop checks passed"
